{%extends display.main%}
{%block body%}

<div class="f justify-center">
	<div class="c7">
		<div class="cbox">
			{{block('data')}}
		</div>
	</div>

</div>
{%endblock%}

{%block data%}
<h3>مستندات اتصال به وب‌سرویس</h3>
<p>برای اتصال به سامانه و انجام هر گونه عملیات باید از فیلتر اعتبار سنجی عبور کنید</p>
<p>فرایند اعتبار سنجی به صورت خلاصه این‌گونه است.</p>
<p>شما توکن ثابتی را در اختیار دارید،‌ آن را به سرور ارسال می‌کنید و درخواست توکن موقف خواهید کرد،‌ سیستم به شما توکن موقت یکبارمصرف تحویل می‌دهد،‌حال با آن توکن جدید عملیات خودتون رو ادامه می‌دهید.</p>
<p>بیایید این فرایند را به صورت کامل بررسی کنیم:</p>
<p><b>ارسال توکن ثابت و دریافت توکن موقت</b></p>
<p>
	با توکن موقت فقط قادر به ثبت‌نام کاربر خواهید بود
</p>
<p>کافیت به آدرس زیر توکن ثابت خود را ارسال کنید</p>
<blockquote class="ltr">
	<code class="badge primary">POST</code>
	<a>https://example.com/api/v5/token</a>
</blockquote>
<hr>
<blockquote class="ltr">
Header
<pre>
'authorization: YourStaticApiKey'
'x-app-request: android'
</pre>
</blockquote>

<blockquote class="ltr mT10">
<code class="badge">SERVER RESULT</code>

<pre>
{
    "ok": true,
    "result": {
        "auth": "ec8e69c19ebb7c202ae1097aa40484e0",
        "date": "2019-02-19 14:04:32"
    }
}
</pre>

</blockquote>

<pre class="msg secondary sm">
curl -X POST \
  https://example.com/api/v5/token \
  -H 'authorization: YourStaticApiKey' \
  -H 'x-app-request: android'
</pre>

<p class="msg warn">
	خطا های احتمالی
</p>
<p>
	اگر آدرس اشتباهی را فراخوانی کنید خطای 404 ظاهر خواهد شد
</p>

<pre class="secondary">
{
	"ok": false,
	"msg": [
	    {
	        "type": "error",
	        "text": "We can't find the page you're looking for!",
	        "meta": {
	            "title": "Not Found 404"
	        }
	    }
	]
}
</pre>
<p>
اگر هر کدام از پارامتر های هدر را نا‌معتبر وارد کنید خطای زیر رخ خواهد داد
</p>
<pre class="secondary">
{
    "ok": false,
    "msg": [
        {
            "type": "error",
            "text": "Unauthorized 401"
        }
    ]
}
</pre>
<div class="mT50"></div>
<h3>ثبت‌نام کاربر</h3>
<p>
	برای ثبت‌نام کاربر باید با در دست داشتن توکن موقت مقادیر لازم را به سرور ارسال کنید
</p>
<blockquote class="ltr">
	<code class="badge primary">POST</code>
	<a>https://example.com/api/v5/user/add</a>
</blockquote>
<hr>
<blockquote class="ltr">
Header
<pre>
'authorization: YourStaticApiKey'
'x-app-request: android'
'auth2: ec8e69c19ebb7c202ae1097aa40484e0'
</pre>
</blockquote>

<blockquote class="ltr mT10">
<code class="badge">SERVER RESULT</code>

<pre>
{
    "ok": true,
    "result": {
        "user_code": "3N5B",
        "user_token": "470ff9db20270d8f2a586d8ebcddea20"
    }
}
</pre>

</blockquote>

<pre class="msg secondary sm">
curl -X POST \
  https://example.com/api/v5/user/add \
  -H 'authorization: $2y$07$J5lyhNSfVCEVxPZvEmrXhemZpzwekNKJRPHC1kwth3yPw6U6cUBPC' \
  -H 'auth2: ec8e69c19ebb7c202ae1097aa40484e0' \
  -H 'x-app-request: android' \
  -F 'model=model name' \
  -F 'serial=serial number'
</pre>



{%endblock%}